<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cotells â€“ Dagens tema</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <a href="/" class="logo">Cotells</a>
    <a href="/admin" class="admin-link">Admin</a>
  </header>

  <main>
    <section id="topic-section">
      <h1>Dagens tema</h1>
      <p id="topic-text">Laster dagens tema â€¦</p>

      <div id="vote-buttons">
        <button id="vote-up">ğŸ‘ Enig</button>
        <button id="vote-down">ğŸ‘ Uenig</button>
      </div>
    </section>

    <section id="newsletter">
      <h2>FÃ¥ tilgang</h2>
      <form id="email-form">
        <input type="email" id="email" placeholder="Din e-postadresse" required />
        <button type="submit">Send</button>
      </form>
    </section>
  </main>

  <footer>
    <p>Â© 2025 Cotells</p>
  </footer>

  <script>
    async function loadTopic() {
      try {
        const res = await fetch('/api/topics');
        const data = await res.json();
        document.getElementById('topic-text').textContent =
          data?.topic || 'Ingen tema funnet.';
      } catch (e) {
        document.getElementById('topic-text').textContent =
          'Kunne ikke laste tema.';
      }
    }

    loadTopic();

    document.getElementById('vote-up').addEventListener('click', () =>
      fetch('/api/vote', { method: 'POST', body: JSON.stringify({ vote: 'up' }) })
    );
    document.getElementById('vote-down').addEventListener('click', () =>
      fetch('/api/vote', { method: 'POST', body: JSON.stringify({ vote: 'down' }) })
    );
  </script>
</body>
</html>
